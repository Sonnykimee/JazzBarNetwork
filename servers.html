<!DOCTYPE html>
<html>

	<!-- Head -->
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Jazz Bar Network</title>
		<link href="styles/main.css" rel="stylesheet" type="text/css"/>
		<script src="js/jquery-3.6.0.js"></script>
	</head>
	
	<!-- Body -->
	<body>
		<!-- Content -->
		<div class="container">
			<h1>
				<ul>
					<li><a class="active" href="index.html">Home</a></li>
					<li><a class="active" href="rules.html">Rules</a></li>
					<li><a class="active" href="servers.html">Servers</a></li>
				</ul>
				
				<img src="images/logo.png" width="300"/>
			</h1>

			<h2>
				List of Servers
			</h2>
			
			<p>Download JSON File: <a href="files/servers.json">servers.json</a></p>

			<table class="table table-stripped" style="width:70%">
				<tr class="bg-info">
					<th>Name</th>
					<th>IP Address</th>
					<th>Message of the Day</th>
				</tr>
					
				<tbody id="serversTable">

				</tbody>
			</table>

			<script>
				// @license magnet:?xt=urn:btih:1f739d935676111cfff4b4693e3816e664797050&dn=gpl-3.0.txt GPL-3.0
				var init = {
					method: "GET",
					headers: {
						"Content-Type": "application/json"
					},
					mode: "cors",
					cache: "default"
				};

				let request = new Request("files/servers.json", init);

				fetch(request)
				.then(function (resp) {
					return resp.json();
				}).then(function (jsonData) {
					buildTable(jsonData.servers);
				})

				function buildTable(data) {
					var table = document.getElementById("serversTable");

					for (var i=0; i<data.length; i++) {
						var row =`
								<tr>
									<td>${data[i].name}</td>
									<td>${data[i].address}</td>
									<td>${data[i].motd}</td>
								<tr>`;

						table.innerHTML += row;
					}
				}
				// @license-end
			</script>
		</div>
	</body>
	
</html>